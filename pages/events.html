<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Events | Forsyth Bridge</title>
<meta content="Community events, workshops, and programs in Forsyth County." name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link href="../css/tsa-webmaster-64beab.webflow.shared.56492c9b5.css" rel="stylesheet" type="text/css"/>
<link href="../css/shared.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css" />
<link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon"/>
</head>
<body>
<div class="page-wrapper">

<!-- Navigation -->
<div data-animation="default" class="navbar_component w-nav" data-easing2="ease" data-easing="ease" data-collapse="medium" role="banner" data-duration="400">
  <div class="navbar_container">
    <a href="../index.html" class="navbar_logo-link w-nav-brand">
      <div class="navbar_logo" style="font-size: 1.4rem;">Forsyth Bridge</div>
    </a>
    <nav role="navigation" class="navbar_menu is-page-height-tablet w-nav-menu">
      <div class="navbar_menu-links">
        <a href="resources.html" class="navbar_link w-nav-link">Resources</a>
        <a href="events.html" class="navbar_link w-nav-link w--current">Events</a>
        <a href="about.html" class="navbar_link w-nav-link">About</a>
        <a href="get-involved.html" class="navbar_link w-nav-link">Get Involved</a>
        <a href="emergency.html" class="navbar_link w-nav-link" style="color: #dc3545;">Emergency</a>
      </div>
      <div class="navbar_menu-buttons">
        <a data-wf--button--variant="full-red" href="contact.html" class="btn w-inline-block">
          <div>Get Help</div>
        </a>
      </div>
    </nav>
    <div class="navbar_menu-button w-nav-button">
      <div class="menu-icon1">
        <div class="menu-icon1_line-top"></div>
        <div class="menu-icon1_line-middle"><div class="menu-icon1_line-middle-inner"></div></div>
        <div class="menu-icon1_line-bottom"></div>
      </div>
    </div>
  </div>
</div>

<!-- Page Header -->
<header class="page-header">
  <div class="padding-global">
    <div class="container-medium">
      <div class="text-style-tagline">Community Calendar</div>
      <h1>Events</h1>
      <p>Join us at workshops, resource fairs, and community gatherings designed to connect and support.</p>
    </div>
  </div>
</header>

<!-- Events Section -->
<section style="padding: 4rem 0; background: white;">
  <div class="padding-global">
    <div class="container-large">
      <!-- Calendar Controls -->
      <div class="calendar-header">
        <div class="search-container" style="margin: 0; max-width: 400px;">
          <div class="search-bar" style="padding: 0.25rem;">
            <input type="text" placeholder="Search events..." style="padding: 0.75rem 1rem;">
            <button type="button" style="padding: 0.75rem 1.5rem;"><i class="ph ph-magnifying-glass"></i></button>
          </div>
        </div>
        <div class="view-toggle">
          <button class="active"><i class="ph ph-list"></i> List</button>
          <button><i class="ph ph-calendar"></i> Calendar</button>
        </div>
      </div>

      <!-- Filter Pills -->
      <div class="filter-section">
        <div class="filter-pills">
          <a href="#" class="filter-pill active">All Events</a>
          <a href="#" class="filter-pill">Workshops</a>
          <a href="#" class="filter-pill">Resource Fairs</a>
          <a href="#" class="filter-pill">Support Groups</a>
          <a href="#" class="filter-pill">Community</a>
          <a href="#" class="filter-pill">Training</a>
        </div>
      </div>

      <!-- Featured Event -->
      <div id="featured-event" style="background: linear-gradient(135deg, #e85d3b 0%, #d44d2b 100%); border-radius: 1rem; padding: 3rem; color: white; margin-bottom: 3rem;">
        <div style="text-align: center; padding: 2rem;">
          <i class="ph ph-spinner" style="font-size: 2rem; animation: spin 1s linear infinite;"></i>
          <p style="margin-top: 1rem;">Loading featured event...</p>
        </div>
      </div>

      <!-- Upcoming Events -->
      <h2 style="font-size: 1.75rem; margin-bottom: 2rem;">Upcoming Events</h2>
      
      <div id="events-grid" class="cards-grid" style="grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));">
        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
          <i class="ph ph-spinner" style="font-size: 2rem; animation: spin 1s linear infinite;"></i>
          <p style="margin-top: 1rem; color: #666;">Loading events from spreadsheet...</p>
        </div>
      </div>
      
      <style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      </style>

      <!-- Past Events -->
      <div style="margin-top: 4rem;">
        <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #666;">Past Events</h2>
        <p style="color: #888;">View recordings and resources from previous events.</p>
        <a href="#" class="btn-secondary" style="margin-top: 1rem;">Browse Past Events</a>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer_component">
  <div class="padding-global">
    <div class="container-large">
      <div class="padding-section-medium">
        <div class="footer_top-wrapper">
          <div class="footer_left-wrapper">
            <a href="../index.html" class="footer_logo-link w-inline-block">
              <div class="footer_logo" style="font-size: 1.5rem; font-weight: 700; color: white;">Forsyth Bridge</div>
            </a>
            <div class="margin-top margin-small">
              <div class="footer_text">Connecting communities to essential resources and support services.</div>
            </div>
          </div>
          <div class="footer_menu-wrapper">
            <div class="footer_link-list">
              <div class="footer_link-list-title">Resources</div>
              <a href="resources.html" class="footer_link">Browse All</a>
              <a href="emergency.html" class="footer_link">Emergency</a>
            </div>
            <div class="footer_link-list">
              <div class="footer_link-list-title">Support</div>
              <a href="help.html" class="footer_link">Help Center</a>
              <a href="contact.html" class="footer_link">Contact Us</a>
            </div>
          </div>
        </div>
        <div class="footer_bottom-wrapper">
          <div class="footer_text">&copy; 2025 Forsyth Bridge. All rights reserved.</div>
        </div>
      </div>
    </div>
  </div>
</footer>

</div>

<script src="../js/jquery.js"></script>
<script src="../js/webflow-script.js"></script>
<script src="../js/sheets-loader.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async function() {
  const events = await SheetsLoader.loadEvents();
  
  const featuredContainer = document.getElementById('featured-event');
  const eventsGrid = document.getElementById('events-grid');
  
  if (events.length === 0) {
    featuredContainer.innerHTML = `
      <div style="text-align: center; padding: 2rem;">
        <p>No events found. Please check that your Google Sheet has data in the Events tab.</p>
      </div>
    `;
    eventsGrid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
        <p style="color: #666;">No upcoming events at this time.</p>
      </div>
    `;
    return;
  }
  
  const sortedEvents = events.sort((a, b) => new Date(a.date) - new Date(b.date));
  
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  
  const futureEvents = sortedEvents.filter(e => {
    const eventDate = new Date(e.date);
    eventDate.setHours(0, 0, 0, 0);
    return eventDate >= today;
  });
  
  const eventsToShow = futureEvents.length > 0 ? futureEvents : sortedEvents;
  
  if (eventsToShow.length > 0) {
    featuredContainer.innerHTML = SheetsLoader.renderFeaturedEvent(eventsToShow[0]);
  }
  
  const remainingEvents = eventsToShow.slice(1);
  if (remainingEvents.length > 0) {
    eventsGrid.innerHTML = remainingEvents.map(event => SheetsLoader.renderEventCard(event)).join('');
  } else {
    eventsGrid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
        <p style="color: #666;">No additional upcoming events at this time.</p>
      </div>
    `;
  }
  
  const searchInput = document.querySelector('input[placeholder="Search events..."]');
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      const query = this.value.toLowerCase();
      const filtered = eventsToShow.filter(e => 
        (e.title && e.title.toLowerCase().includes(query)) ||
        (e.description && e.description.toLowerCase().includes(query)) ||
        (e.location && e.location.toLowerCase().includes(query))
      );
      
      if (filtered.length > 0) {
        featuredContainer.innerHTML = SheetsLoader.renderFeaturedEvent(filtered[0]);
        const remaining = filtered.slice(1);
        eventsGrid.innerHTML = remaining.length > 0 
          ? remaining.map(event => SheetsLoader.renderEventCard(event)).join('')
          : '<div style="grid-column: 1 / -1; text-align: center; padding: 3rem;"><p style="color: #666;">No more matching events.</p></div>';
      } else {
        featuredContainer.innerHTML = '<div style="text-align: center; padding: 2rem;"><p>No events match your search.</p></div>';
        eventsGrid.innerHTML = '';
      }
    });
  }
});
</script>
</body>
</html>
