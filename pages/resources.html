<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Resources Directory | Forsyth Bridge</title>
<meta content="Find essential community resources, support services, and programs in Forsyth County." name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link href="../css/tsa-webmaster-64beab.webflow.shared.56492c9b5.css" rel="stylesheet" type="text/css"/>
<link href="../css/shared.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css" />
<link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon"/>
</head>
<body>
<div class="page-wrapper">

<!-- Navigation -->
<div data-animation="default" class="navbar_component w-nav" data-easing2="ease" data-easing="ease" data-collapse="medium" role="banner" data-duration="400">
  <div class="navbar_container">
    <a href="../index.html" class="navbar_logo-link w-nav-brand">
      <div class="navbar_logo" style="font-size: 1.4rem;">Forsyth Bridge</div>
    </a>
    <nav role="navigation" class="navbar_menu is-page-height-tablet w-nav-menu">
      <div class="navbar_menu-links">
        <a href="resources.html" class="navbar_link w-nav-link w--current">Resources</a>
        <a href="events.html" class="navbar_link w-nav-link">Events</a>
        <a href="about.html" class="navbar_link w-nav-link">About</a>
        <a href="get-involved.html" class="navbar_link w-nav-link">Get Involved</a>
        <a href="emergency.html" class="navbar_link w-nav-link" style="color: #dc3545;">Emergency</a>
      </div>
      <div class="navbar_menu-buttons">
        <a data-wf--button--variant="full-red" href="contact.html" class="btn w-inline-block">
          <div>Get Help</div>
        </a>
      </div>
    </nav>
    <div class="navbar_menu-button w-nav-button">
      <div class="menu-icon1">
        <div class="menu-icon1_line-top"></div>
        <div class="menu-icon1_line-middle"><div class="menu-icon1_line-middle-inner"></div></div>
        <div class="menu-icon1_line-bottom"></div>
      </div>
    </div>
  </div>
</div>

<!-- Page Header -->
<header class="page-header">
  <div class="padding-global">
    <div class="container-medium">
      <div class="text-style-tagline">Community Resources</div>
      <h1>Resource Directory</h1>
      <p>Find the support and services you need. Browse by category or search for specific resources.</p>
    </div>
  </div>
</header>

<!-- Search Section -->
<section style="padding: 3rem 0; background: white;">
  <div class="padding-global">
    <div class="container-large">
      <div class="search-container">
        <div class="search-bar">
          <input type="text" placeholder="Search resources by name or keyword..." id="resourceSearch">
          <button type="button"><i class="ph ph-magnifying-glass"></i> Search</button>
        </div>
      </div>
      
      <!-- Category Filters -->
      <div class="filter-section">
        <div class="filter-pills">
          <a href="#" class="filter-pill active">All Resources</a>
          <a href="resources/category/food.html" class="filter-pill"><i class="ph ph-bowl-food"></i> Food Assistance</a>
          <a href="resources/category/education.html" class="filter-pill"><i class="ph ph-graduation-cap"></i> Education</a>
          <a href="resources/category/mental-health.html" class="filter-pill"><i class="ph ph-heart"></i> Mental Health</a>
          <a href="resources/category/housing.html" class="filter-pill"><i class="ph ph-house"></i> Housing</a>
          <a href="resources/category/healthcare.html" class="filter-pill"><i class="ph ph-first-aid-kit"></i> Healthcare</a>
          <a href="resources/category/employment.html" class="filter-pill"><i class="ph ph-briefcase"></i> Employment</a>
          <a href="resources/category/youth.html" class="filter-pill"><i class="ph ph-users"></i> Youth Services</a>
          <a href="resources/category/seniors.html" class="filter-pill"><i class="ph ph-user"></i> Senior Services</a>
        </div>
      </div>

      <!-- Sort Options -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <p id="resource-count" style="color: #666;">Loading resources...</p>
        <select id="sort-select" style="padding: 0.5rem 1rem; border: 2px solid #e0e0e0; border-radius: 8px;">
          <option value="az">Sort by: A-Z</option>
          <option value="category">Sort by: Category</option>
        </select>
      </div>

      <!-- Resources Grid -->
      <div id="resources-grid" class="cards-grid">
        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
          <i class="ph ph-spinner" style="font-size: 2rem; animation: spin 1s linear infinite;"></i>
          <p style="margin-top: 1rem; color: #666;">Loading resources from spreadsheet...</p>
        </div>
      </div>
      
      <style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      </style>

      <!-- Can't Find CTA -->
      <div style="text-align: center; margin-top: 4rem; padding: 3rem; background: #f8f9fa; border-radius: 1rem;">
        <h3 style="margin-bottom: 1rem;">Can't find what you need?</h3>
        <p style="color: #666; margin-bottom: 1.5rem;">Let us help you connect with the right resources for your situation.</p>
        <a href="contact.html" class="btn-primary">Contact Us for Help</a>
        <a href="submit-resource.html" class="btn-secondary" style="margin-left: 1rem;">Suggest a Resource</a>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer_component">
  <div class="padding-global">
    <div class="container-large">
      <div class="padding-section-medium">
        <div class="footer_top-wrapper">
          <div class="footer_left-wrapper">
            <a href="../index.html" class="footer_logo-link w-inline-block">
              <div class="footer_logo" style="font-size: 1.5rem; font-weight: 700; color: white;">Forsyth Bridge</div>
            </a>
            <div class="margin-top margin-small">
              <div class="footer_text">Connecting communities to essential resources and support services.</div>
            </div>
          </div>
          <div class="footer_menu-wrapper">
            <div class="footer_link-list">
              <div class="footer_link-list-title">Resources</div>
              <a href="resources.html" class="footer_link">Browse All</a>
              <a href="resources/category/food.html" class="footer_link">Food Assistance</a>
              <a href="resources/category/housing.html" class="footer_link">Housing</a>
              <a href="emergency.html" class="footer_link">Emergency</a>
            </div>
            <div class="footer_link-list">
              <div class="footer_link-list-title">About</div>
              <a href="about.html" class="footer_link">Our Mission</a>
              <a href="get-involved.html" class="footer_link">Get Involved</a>
              <a href="partners.html" class="footer_link">Partners</a>
              <a href="news.html" class="footer_link">News</a>
            </div>
            <div class="footer_link-list">
              <div class="footer_link-list-title">Support</div>
              <a href="help.html" class="footer_link">Help Center</a>
              <a href="contact.html" class="footer_link">Contact Us</a>
              <a href="privacy.html" class="footer_link">Privacy Policy</a>
              <a href="terms.html" class="footer_link">Terms of Use</a>
            </div>
          </div>
        </div>
        <div class="footer_bottom-wrapper">
          <div class="footer_text">&copy; 2025 Forsyth Bridge. All rights reserved.</div>
        </div>
      </div>
    </div>
  </div>
</footer>

</div>

<script src="../js/jquery.js"></script>
<script src="../js/webflow-script.js"></script>
<script src="../js/sheets-loader.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async function() {
  let allResources = await SheetsLoader.loadResources();
  
  const resourcesGrid = document.getElementById('resources-grid');
  const resourceCount = document.getElementById('resource-count');
  const searchInput = document.getElementById('resourceSearch');
  const sortSelect = document.getElementById('sort-select');
  
  function renderResources(resources) {
    if (resources.length === 0) {
      resourcesGrid.innerHTML = `
        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
          <p style="color: #666;">No resources found.</p>
        </div>
      `;
      resourceCount.innerHTML = 'Showing <strong>0</strong> resources';
      return;
    }
    
    resourcesGrid.innerHTML = resources.map(resource => SheetsLoader.renderResourceCard(resource)).join('');
    resourceCount.innerHTML = `Showing <strong>${resources.length}</strong> resources`;
  }
  
  function sortResources(resources, sortBy) {
    const sorted = [...resources];
    if (sortBy === 'az') {
      sorted.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
    } else if (sortBy === 'category') {
      sorted.sort((a, b) => (a.category || '').localeCompare(b.category || ''));
    }
    return sorted;
  }
  
  function filterAndRender() {
    let filtered = allResources;
    
    if (searchInput && searchInput.value) {
      const query = searchInput.value.toLowerCase();
      filtered = allResources.filter(r => 
        (r.name && r.name.toLowerCase().includes(query)) ||
        (r.description && r.description.toLowerCase().includes(query)) ||
        (r.category && r.category.toLowerCase().includes(query)) ||
        (r.address && r.address.toLowerCase().includes(query))
      );
    }
    
    const sortBy = sortSelect ? sortSelect.value : 'az';
    filtered = sortResources(filtered, sortBy);
    
    renderResources(filtered);
  }
  
  if (allResources.length === 0) {
    resourcesGrid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
        <p style="color: #666;">No resources found. Please check that your Google Sheet has data in the Resources tab.</p>
      </div>
    `;
    resourceCount.innerHTML = 'Showing <strong>0</strong> resources';
  } else {
    filterAndRender();
  }
  
  if (searchInput) {
    searchInput.addEventListener('input', filterAndRender);
  }
  
  if (sortSelect) {
    sortSelect.addEventListener('change', filterAndRender);
  }
  
  const filterPills = document.querySelectorAll('.filter-pill');
  filterPills.forEach(pill => {
    if (pill.getAttribute('href') === '#') {
      pill.addEventListener('click', function(e) {
        e.preventDefault();
        filterPills.forEach(p => p.classList.remove('active'));
        this.classList.add('active');
        
        const category = this.textContent.trim().toLowerCase();
        
        if (category === 'all resources') {
          filterAndRender();
        } else {
          const filtered = allResources.filter(r => 
            r.category && r.category.toLowerCase().includes(category.replace(/[^a-z]/g, ''))
          );
          renderResources(sortResources(filtered, sortSelect ? sortSelect.value : 'az'));
        }
      });
    }
  });
});
</script>
</body>
</html>
